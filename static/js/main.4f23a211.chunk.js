(this.webpackJsonpmeshnet=this.webpackJsonpmeshnet||[]).push([[0],{22:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n.n(s),o=n(5),c=n.n(o),a=(n(22),n(2)),i=n(9),l=n(32),d=n(13),u=n(14),p=n(17),f=n(16),b=n(15),h=n.n(b),j=n(0),x=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(e){var s;return Object(d.a)(this,n),(s=t.call(this,e)).updatePos=function(e,t){s.setState({pos:{x:e,y:t}}),s.props.onPosUpdate(s.pos)},s.addPeer=function(e){if(s.state.peers.includes(e))return null;var t=[].concat(Object(a.a)(s.peers),[e]).sort();return s.setState({peers:t}),!0},s.removePeer=function(e){var t=s.state.peers.indexOf(e);if(t>-1){var n=s.peers.slice(0,t).concat(s.peers.slice(t+1)).sort();return s.setState({peers:n}),!0}return null},s.scan=function(){for(var e=s.props.nodes,t=e.length,n=0;n<t;n++){Math.hypot(e[n].pos.x-s.pos.x,e[n].pos.y-s.pos.y)<=300?s.addPeer(e[n].id):s.removePeer(e[n].id)}},s.id=e.id,s.state={pos:e.pos,peers:[]},s}return Object(u.a)(n,[{key:"pos",get:function(){return this.state.pos}},{key:"peers",get:function(){return this.state.peers}},{key:"componentDidUpdate",value:function(e,t){(function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0})(t.peers,this.peers)||this.props.onPeersUpdate(this.peers)}},{key:"componentDidMount",value:function(){var e=this;setInterval((function(){e.scan()}),500)}},{key:"render",value:function(){var e=this;return Object(j.jsx)(h.a,{defaultClassName:"absolute ".concat(this.props.className),position:this.state.pos,onDrag:function(t,n){var s=n.x,r=n.y;return e.updatePos(s,r)},onStop:this.props.updateNodePeers,bounds:"parent",children:Object(j.jsxs)("div",{className:"transition-color select-none font-mono text-white bg-green-600 rounded-full shadow-xl w-16 h-16 flex flex-col justify-center items-center hover:bg-green-500 overflow-visible whitespace-nowrap",children:[Object(j.jsx)("div",{className:"text-xs font-bold",children:this.state.pos.x+" "+this.state.pos.y}),Object(j.jsxs)("div",{className:"flex-col text-xs peers hidden absolute left-full ml-2 p-1 bg-gray-500 rounded shadow-xl",children:[Object(j.jsx)("p",{className:"place-self-center",children:"PEERS"}),Object(j.jsx)("hr",{className:"my-0.5"}),this.peers.map((function(e){return Object(j.jsx)("p",{children:e})}))]}),Object(j.jsx)("div",{className:"absolute transition-all node-range z-0 bg-transparent rounded-full border w-0 h-0 opacity-0"})]})})}}]),n}(s.Component);function v(e){var t=e.onClick,n=e.title;return Object(j.jsx)("div",{className:"border-2 border-t-0 rounded-lg border-gray-400",children:Object(j.jsx)("button",{title:n,className:"flex shadow justify-center items-center font-bold text-white bg-blue-500 leading-none p-3 px-3 w-40 max-w-prose self-end border-b-4 border-blue-700 rounded-md hover:bg-blue-400 active:border-b-2 active:mt-0.5",onClick:t,children:n})})}function m(e){var t=e.from,n=e.to,s=e.offset;return Object(j.jsx)("line",{x1:t.x+s,y1:t.y+s,x2:n.x+s,y2:n.y+s,className:"line"})}var O=function(){var e=Object(s.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],o=Object(s.useState)([]),c=Object(i.a)(o,2),d=c[0],u=c[1];return Object(s.useEffect)((function(){!function(e){for(var t=[],n=0;n<e.length-1;n++)for(var s=n+1;s<e.length;s++)Math.hypot(e[n].pos.x-e[s].pos.x,e[n].pos.y-e[s].pos.y)<=300&&t.push([{id:e[n].id,x:e[n].pos.x,y:e[n].pos.y},{id:e[s].id,x:e[s].pos.x,y:e[s].pos.y}]);u(t)}(n)}),[n]),Object(j.jsxs)("div",{className:"h-screen w-full flex flex-col",children:[Object(j.jsx)("div",{className:"w-full bg-gray-500 mx-auto flex justify-center items-center py-8",children:Object(j.jsx)(v,{title:"Add Node",onClick:function(){var e={id:Object(l.a)(),pos:{x:0,y:0},peers:[]};r([].concat(Object(a.a)(n),[e]))}})}),Object(j.jsxs)("div",{className:"relative bg-gray-700 flex-grow",children:[n.map((function(e,t){var s=e.pos,o=e.id;return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(x,{className:"node",nodes:n.slice(0,t).concat(n.slice(t+1)),pos:s,id:o,onPosUpdate:function(e){return function(e,t){var s=Object(a.a)(n);s[e].pos=t,r(s)}(t,e)},onPeersUpdate:function(e){return function(e,t){var s=Object(a.a)(n);s[e].peers=t,r(s)}(t,e)}},o)})})),Object(j.jsx)("svg",{width:"100%",height:"100%",children:d.map((function(e){return Object(j.jsx)(m,{from:e[0],to:e[1],offset:40},e[0].id+"TO"+e[1].id)}))})]})]})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,33)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),s(e),r(e),o(e),c(e)}))};c.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(O,{})}),document.getElementById("root")),g()}},[[30,1,2]]]);
//# sourceMappingURL=main.4f23a211.chunk.js.map