{"version":3,"sources":["components/Node.js","config/config.js","lib/util.js","components/Button.js","components/Line.js","App.js","reportWebVitals.js","index.js"],"names":["Node","props","updatePos","x","y","setState","pos","onPosUpdate","addPeer","id","state","peers","includes","updatedPeers","sort","removePeer","i","indexOf","slice","concat","scan","nodes","n","length","Math","hypot","this","prevProps","prevState","arr1","arr2","areEqual","onPeersUpdate","setInterval","defaultClassName","className","position","onDrag","event","onStop","updateNodePeers","bounds","map","peer","Component","Button","onClick","title","Line","from","to","offset","x1","y1","x2","y2","App","useState","setNodes","links","setLinks","useEffect","updatedLinks","j","push","updateLinks","node","uuid","updatedNodes","updateNodePos","width","height","link","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4f23a211.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport Draggable from \"react-draggable\";\r\nimport { areEqual } from \"../lib/util\";\r\nimport { RANGE } from \"../config/config.js\";\r\n\r\nexport default class Node extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.id = props.id\r\n        this.state = {\r\n            pos: props.pos,\r\n            peers: []\r\n        }\r\n    }\r\n\r\n    get pos() { return this.state.pos }\r\n    get peers() { return this.state.peers }\r\n\r\n    updatePos = (x, y) => {\r\n        this.setState({ pos: { x, y } })\r\n        this.props.onPosUpdate(this.pos)\r\n    }\r\n\r\n    addPeer = (id) => {\r\n        if (!this.state.peers.includes(id)) {\r\n            const updatedPeers = [...this.peers, id].sort()\r\n\r\n            this.setState({ peers: updatedPeers })\r\n            return true\r\n        } else\r\n            return null\r\n    }\r\n\r\n    removePeer = (id) => {\r\n        const i = this.state.peers.indexOf(id)\r\n\r\n        if (i > -1) {\r\n            const updatedPeers = this.peers.slice(0, i).concat(this.peers.slice(i + 1)).sort()\r\n            this.setState({ peers: updatedPeers })\r\n            return true\r\n        } else\r\n            return null\r\n    }\r\n\r\n    scan = () => {\r\n        const nodes = this.props.nodes\r\n        const n = nodes.length\r\n\r\n        for (let i = 0; i < n; i++) {\r\n            const d = Math.hypot(nodes[i].pos.x - this.pos.x, nodes[i].pos.y - this.pos.y)\r\n\r\n            if (d <= RANGE) this.addPeer(nodes[i].id)\r\n            else this.removePeer(nodes[i].id)\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (!areEqual(prevState.peers, this.peers)) {\r\n            this.props.onPeersUpdate(this.peers)\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        setInterval(() => {\r\n            this.scan()\r\n        }, 500);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Draggable\r\n                defaultClassName={`absolute ${this.props.className}`}\r\n                position={this.state.pos}\r\n                onDrag={(event, { x, y }) => this.updatePos(x, y)}\r\n                onStop={this.props.updateNodePeers}\r\n                bounds='parent'\r\n            >\r\n                <div className='transition-color select-none font-mono text-white bg-green-600 rounded-full shadow-xl w-16 h-16 flex flex-col justify-center items-center hover:bg-green-500 overflow-visible whitespace-nowrap'>\r\n                    <div className='text-xs font-bold'>{this.state.pos.x + ' ' + this.state.pos.y}</div>\r\n                    <div className='flex-col text-xs peers hidden absolute left-full ml-2 p-1 bg-gray-500 rounded shadow-xl'>\r\n                        <p className='place-self-center'>PEERS</p>\r\n                        <hr className='my-0.5'/>\r\n                        {this.peers.map(peer=> <p>{peer}</p>)}\r\n                    </div>\r\n                    <div className='absolute transition-all node-range z-0 bg-transparent rounded-full border w-0 h-0 opacity-0'></div>\r\n                </div>\r\n            </Draggable>)\r\n    }\r\n}","export const RANGE = 300","export const areEqual = (arr1, arr2) => {\r\n    if (arr1.length !== arr2.length)\r\n        return false\r\n\r\n    for (let i = 0; i < arr1.length; i++) {\r\n        if (arr1[i] !== arr2[i]) return false\r\n    }\r\n\r\n    return true\r\n}","export default function Button({ onClick, title }) {\r\n    return (\r\n        <div className='border-2 border-t-0 rounded-lg border-gray-400'>\r\n            <button\r\n                title={title}\r\n                className='flex shadow justify-center items-center font-bold text-white bg-blue-500 leading-none p-3 px-3 w-40 max-w-prose self-end border-b-4 border-blue-700 rounded-md hover:bg-blue-400 active:border-b-2 active:mt-0.5'\r\n                onClick={onClick}\r\n            >{title}</button>\r\n        </div>\r\n    )\r\n}","export default function Line({from,to, offset}) {\r\n    return (<line x1={from.x + offset} y1={from.y + offset} x2={to.x + offset} y2={to.y + offset} className=\"line\" />\r\n    )\r\n}","import { useEffect, useState } from 'react'\nimport { v4 as uuid } from 'uuid'\nimport Node from './components/Node'\nimport Button from './components/Button'\nimport Line from './components/Line'\nimport { RANGE } from \"./config/config.js\";\n\n\nfunction App() {\n  const [nodes, setNodes] = useState([])\n  const [links, setLinks] = useState([])\n\n  function addNode() {\n    const node = { id: uuid(), pos: { x: 0, y: 0 }, peers: [] }\n    setNodes([...nodes, node])\n  }\n\n  function updateNodePos(i, pos) {\n    const updatedNodes = [...nodes]\n    updatedNodes[i].pos = pos\n\n    setNodes(updatedNodes)\n  }\n\n  function updateNodePeers(i, peers) {\n    const updatedNodes = [...nodes]\n    updatedNodes[i].peers = peers\n\n    setNodes(updatedNodes)\n\n  }\n\n  const updateLinks = (nodes) => {\n    const updatedLinks = []\n\n    for (let i = 0; i < nodes.length - 1; i++) {\n      for (let j = i + 1; j < nodes.length; j++) {\n        const d = Math.hypot(nodes[i].pos.x - nodes[j].pos.x, nodes[i].pos.y - nodes[j].pos.y)\n\n        if (d <= RANGE) updatedLinks.push([\n          {\n            id:nodes[i].id,\n            x: nodes[i].pos.x,\n            y: nodes[i].pos.y\n          },\n          {\n            id:nodes[j].id,\n            x: nodes[j].pos.x,\n            y: nodes[j].pos.y\n          }\n        ])\n      }\n    }\n    setLinks(updatedLinks)\n  }\n\n  useEffect(() => {\n    updateLinks(nodes)\n  }, [nodes])\n\n  return (\n    <div className='h-screen w-full flex flex-col'>\n      <div className='w-full bg-gray-500 mx-auto flex justify-center items-center py-8'>\n        <Button\n          title='Add Node'\n          onClick={addNode}\n        />\n      </div>\n      <div className=\"relative bg-gray-700 flex-grow\">\n\n        {/* render nodes */}\n        {nodes.map(({ pos, id }, i) => {\n          return (\n            <>\n              <Node\n                className='node'\n                nodes={nodes.slice(0, i).concat(nodes.slice(i + 1))}\n                pos={pos}\n                id={id}\n                key={id}\n                onPosUpdate={(pos) => updateNodePos(i, pos)}\n                onPeersUpdate={(peers) => updateNodePeers(i, peers)}\n              />\n            </>\n          )\n        })}\n\n        {/* render links between nodes */}\n        <svg width='100%' height='100%'>\n          {links.map(link => {\n            return <Line \n            key={link[0].id+'TO'+link[1].id}\n            from={link[0]}\n            to={link[1]}\n            offset={40} />\n          })}\n        </svg>\n      </div>\n    </div >\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}