(this.webpackJsonpmeshnet=this.webpackJsonpmeshnet||[]).push([[0],{19:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),s=n(5),c=n.n(s),i=(n(19),n(3)),a=n(2),l=n(6),d=n(12),u=n.n(d),b=n(0);function j(e){var t=e.node,n=e.className,r=e.onDrag,o=e.onMouseDown,s=(t.id,t.pos),c=t.peers;return Object(b.jsx)(u.a,{defaultClassName:"absolute ".concat(n),position:s,onDrag:function(e,t){var n=t.x,o=t.y;return r({x:n,y:o})},onMouseDown:function(e){return o(e)},bounds:"parent",children:Object(b.jsxs)("div",{className:"node transition-color select-none font-mono text-white bg-green-600 rounded-full shadow-xl w-16 h-16 flex flex-col justify-center items-center hover:bg-green-500 overflow-visible whitespace-nowrap hover:animate-ping",children:[Object(b.jsx)("div",{className:"text-xs font-bold",children:s.x+" "+s.y}),Object(b.jsxs)("div",{className:"flex-col text-xs peers hidden absolute left-full top-full ml-2 p-1 bg-gray-500 rounded shadow-xl",children:[Object(b.jsx)("p",{className:"place-self-center",children:0===Object.keys(c).length?"lonely...":"PEERS"}),Object(b.jsx)("hr",{className:"my-0.5"}),Object.keys(c).map((function(e){return Object(b.jsx)("p",{children:e},e)}))]}),Object(b.jsx)("div",{className:"absolute transition-all duration-400 ease-out node-range z-0 bg-transparent rounded-full border w-0 h-0 opacity-0"})]})})}function f(e){var t=e.onClick,n=e.title;return Object(b.jsx)("div",{className:"rounded-lg border-2 border-blue-200",children:Object(b.jsx)("button",{title:n,className:"flex justify-center items-center font-bold text-white bg-blue-500 leading-none p-3 px-3 w-40 max-w-prose border-b-4  border-blue-600 rounded-md hover:bg-blue-400 active:border-b-2 -mt-0.5 active:mt-0",onClick:t,children:n})})}function h(e){var t=e.from,n=e.to,r=e.offset;return Object(b.jsx)("line",{x1:t.x+r,y1:t.y+r,x2:n.x+r,y2:n.y+r,className:"line"})}var x=n(13),v=n(14),O=n(29),p=function(){function e(){var t=this;Object(x.a)(this,e),this.updatePos=function(e){var n=e.x,r=e.y;t.pos={x:n,y:r}},this.addPeer=function(e){t.peers[e.id]||(t.peers=Object(a.a)(Object(a.a)({},t.peers),{},Object(i.a)({},e.id,e)))},this.removePeer=function(e){t.peers[e.id]&&delete t.peers[e.id]},this.id=Object(O.a)(),this.pos={x:0,y:0},this.peers={}}return Object(v.a)(e,[{key:"x",get:function(){return this.pos.x}},{key:"y",get:function(){return this.pos.y}}]),e}();var m=function(){var e=Object(r.useState)({}),t=Object(l.a)(e,2),n=t[0],o=t[1],s=Object(r.useState)({}),c=Object(l.a)(s,2),d=c[0],u=c[1];function x(){var e=new p;o(Object(a.a)(Object(i.a)({},e.id,e),n))}Object(r.useEffect)((function(){x()}),[]),Object(r.useEffect)((function(){for(var e={},t=0,r=Object.values(n);t<r.length;t++)for(var o=r[t],s=0,c=Object.values(o.peers);s<c.length;s++){var i=c[s],a=[o.id,i.id].sort().join("+");e[a]||(e[a]=[o.pos,i.pos])}u(e)}),[n]);var v=function(e,t){1===t.button&&function(e){for(var t=Object(a.a)({},n),r=0,s=Object.values(t[e.id].peers);r<s.length;r++)delete s[r].peers[e.id];delete t[e.id],o(t)}(e)};return Object(b.jsxs)("div",{className:"h-screen w-full flex flex-col overflow-hidden",children:[Object(b.jsx)("div",{className:"w-full relative z-50 bg-gray-800 border-b-2 border-gray-500 mx-auto flex justify-center items-center py-4",children:Object(b.jsx)(f,{title:"Add Node",onClick:x})}),Object(b.jsxs)("div",{className:"relative bg-gray-700 flex-grow",children:[Object.keys(n).length>0?Object.values(n).map((function(e){return Object(b.jsx)(j,{node:e,onMouseDown:function(t){return v(e,t)},onDrag:function(t){return function(e,t){var r=Object(a.a)({},n);r[e.id].updatePos(t),Object.values(r).forEach((function(t){e.id!==t.id&&(Math.hypot(e.x-t.x,e.y-t.y)<=300?(r[e.id].addPeer(t),r[t.id].addPeer(e)):(r[e.id].removePeer(t),r[t.id].removePeer(e)))})),o(r)}(e,t)}},e.id)})):null,Object(b.jsx)("svg",{width:"100%",height:"100%",children:Object.keys(d).map((function(e){var t=Object(l.a)(d[e],2),n=t[0],r=t[1];return Object(b.jsx)(h,{from:n,to:r,offset:32},e)}))})]})]})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,30)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),o(e),s(e),c(e)}))};c.a.render(Object(b.jsx)(o.a.StrictMode,{children:Object(b.jsx)(m,{})}),document.getElementById("root")),g()}},[[27,1,2]]]);
//# sourceMappingURL=main.da5b19bc.chunk.js.map